*** Settings ***
Force Tags      pybot   jybot
Suite Setup     Login and Move Test Files
Suite Teardown  Remove Test Files and Close Connections
Resource        resources/ssh_library_resources.txt
Library         OperatingSystem  WITH NAME  OS

*** Test Cases ***
Execute Command With Defaults
    ${stdout} =  Execute Command  ./${TEST SCRIPT NAME}
    Should Be Equal  ${stdout}  This is stdout

Execute Command And Return Stderr
    ${stderr} =  Execute Command  ./${TEST SCRIPT NAME}    \   return_stderr=yes
    Should Be Equal  ${stderr}  This is stderr

Execute Command And Return Rc
    ${rc} =  Execute Command  ./${TEST SCRIPT NAME}  return_stdout=${FALSE}  return_rc=${true}
    Should Be Equal As Integers  ${rc}  0

Execute Command And Return All Values
    ${stdout}    ${stderr}    ${rc}=
    ...    Execute Command   ./${TEST SCRIPT NAME}    foo    bar    baz
    Should Be Equal  ${stdout}  This is stdout
    Should Be Equal  ${stderr}  This is stderr
    Should Be Equal As Integers  ${rc}  0

Execute Command With Legacy Stdout Config
    ${stdout} =  Execute Command  ./${TEST SCRIPT NAME}  STDout
    Should Be Equal  ${stdout}  This is stdout

Execute Command With Legacy Stderr Config
    ${stderr} =  Execute Command  ./${TEST SCRIPT NAME}  stderr
    Should Be Equal  ${stderr}  This is stderr

Execute Command With Legacy Stdout And Stderr Config
    ${stdout}  ${stderr} =  Execute Command  ./${TEST SCRIPT NAME}  Both
    Should Be Equal  ${stdout}  This is stdout
    Should Be Equal  ${stderr}  This is stderr

Execute Command With Output Containing Newlines
    ${res} =  Execute Command  cat ${FILE WITH NEWLINES NAME}
    ${actual} =  OS.Get File  ${FILE WITH NEWLINES}
    Should Be Equal  ${res}\n  ${actual}

Execute Command With Multiple Statements
    ${result} =  Execute Command  echo "foo\n"; echo RC=$?
    Should Be Equal  ${result}  foo\n\nRC=0

Executing Command With Non-ASCII characters
    ${result}=  Execute Command  echo 'aaääöö'
    Should Contain  ${result}  aaääöö

